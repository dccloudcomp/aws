{"filter":false,"title":"iam.tf","tooltip":"/terraform/iam.tf","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":55,"column":0},"action":"insert","lines":["data \"aws_iam_policy_document\" \"lambda_assume\" {","  statement {","    effect = \"Allow\"","    principals {","      type        = \"Service\"","      identifiers = [\"lambda.amazonaws.com\"]","    }","    actions = [\"sts:AssumeRole\"]","  }","}","","resource \"aws_iam_role\" \"lambda_role\" {","  name               = \"${var.project_name}-lambda-role\"","  assume_role_policy = data.aws_iam_policy_document.lambda_assume.json","}","","# Permisos m√≠nimos","data \"aws_iam_policy_document\" \"lambda_policy\" {","  statement {","    sid     = \"S3RW\"","    effect  = \"Allow\"","    actions = [","      \"s3:GetObject\",","      \"s3:PutObject\",","      \"s3:ListBucket\"","    ]","    resources = [","      aws_s3_bucket.ingest.arn,","      \"${aws_s3_bucket.ingest.arn}/*\",","      aws_s3_bucket.website.arn,","      \"${aws_s3_bucket.website.arn}/*\",","    ]","  }","","  statement {","    sid     = \"Logs\"","    effect  = \"Allow\"","    actions = [","      \"logs:CreateLogGroup\",","      \"logs:CreateLogStream\",","      \"logs:PutLogEvents\"","    ]","    resources = [\"*\"]","  }","}","","resource \"aws_iam_policy\" \"lambda_policy\" {","  name   = \"${var.project_name}-lambda-policy\"","  policy = data.aws_iam_policy_document.lambda_policy.json","}","","resource \"aws_iam_role_policy_attachment\" \"lambda_attach\" {","  role       = aws_iam_role.lambda_role.name","  policy_arn = aws_iam_policy.lambda_policy.arn","}",""],"id":1}]]},"ace":{"folds":[],"scrolltop":643,"scrollleft":0,"selection":{"start":{"row":55,"column":0},"end":{"row":55,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":44,"state":"start","mode":"ace/mode/terraform"}},"timestamp":1754664379562,"hash":"054caca2284a3bc29ff017c9f7944dfcaaae7167"}